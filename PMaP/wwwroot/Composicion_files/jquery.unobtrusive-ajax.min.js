/*
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){var e="unobtrusiveAjaxClick",f="unobtrusiveAjaxClickTarget",g="unobtrusiveValidation";function h(l,k){var m=window,n=(l||"").split(".");while(m&&n.length){m=m[n.shift()];}if(typeof(m)==="function"){return m;}k.push(l);return Function.constructor.apply(null,k);}function i(k){return k==="GET"||k==="POST";}function b(l,k){if(!i(k)){l.setRequestHeader("X-HTTP-Method-Override",k);}}function c(m,l,k){var n;if(k.indexOf("application/x-javascript")!==-1){return;}n=(m.getAttribute("data-ajax-mode")||"").toUpperCase();a(m.getAttribute("data-ajax-update")).each(function(o,q){var p;switch(n){case"BEFORE":p=q.firstChild;a("<div />").html(l).contents().each(function(){q.insertBefore(this,p);});break;case"AFTER":a("<div />").html(l).contents().each(function(){q.appendChild(this);});break;case"REPLACE-WITH":a(q).replaceWith(l);break;default:a(q).html(l);break;}});}function d(m,p){var k,n,o,l;k=m.getAttribute("data-ajax-confirm");if(k&&!window.confirm(k)){return;}n=a(m.getAttribute("data-ajax-loading"));l=parseInt(m.getAttribute("data-ajax-loading-duration"),10)||0;a.extend(p,{type:m.getAttribute("data-ajax-method")||undefined,url:m.getAttribute("data-ajax-url")||undefined,cache:!!m.getAttribute("data-ajax-cache"),beforeSend:function(r){var q;b(r,o);q=h(m.getAttribute("data-ajax-begin"),["xhr"]).apply(m,arguments);if(q!==false){n.show(l);}return q;},complete:function(){n.hide(l);h(m.getAttribute("data-ajax-complete"),["xhr","status"]).apply(m,arguments);},success:function(q,r,s){c(m,q,s.getResponseHeader("Content-Type")||"text/html");h(m.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(m,arguments);},error:function(){h(m.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(m,arguments);}});p.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});o=p.type.toUpperCase();if(!i(o)){p.type="POST";p.data.push({name:"X-HTTP-Method-Override",value:o});}a.ajax(p);}function j(k){var l=a(k).data(g);return !l||!l.validate||l.validate();}a(document).on("click","a[data-ajax=true]",function(k){k.preventDefault();d(this,{url:this.href,type:"GET",data:[]});});a(document).on("click","form[data-ajax=true] input[type=image]",function(k){var m=k.target.name,o=a(k.target),l=a(o.parents("form")[0]),n=o.offset();l.data(e,[{name:m+".x",value:Math.round(k.pageX-n.left)},{name:m+".y",value:Math.round(k.pageY-n.top)}]);setTimeout(function(){l.removeData(e);},0);});a(document).on("click","form[data-ajax=true] :submit",function(k){var m=k.currentTarget.name,n=a(k.target),l=a(n.parents("form")[0]);l.data(e,m?[{name:m,value:k.currentTarget.value}]:[]);l.data(f,n);setTimeout(function(){l.removeData(e);l.removeData(f);},0);});a(document).on("submit","form[data-ajax=true]",function(m){var k=a(this).data(e)||[],l=a(this).data(f),n=l&&l.hasClass("cancel");m.preventDefault();if(!n&&!j(this)){return;}d(this,{url:this.action,type:this.method||"GET",data:k.concat(a(this).serializeArray())});});}(jQuery));